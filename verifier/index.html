<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Include the Tailwind CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.15/dist/tailwind.min.css" rel="stylesheet" />
    <title>Button Example</title>
  </head>
  <body>
    <div class="flex justify-center items-center h-screen">
      <button id="verifyButton" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
        Verify my eligibility
      </button>

      <div></div>
    </div>

    <script
      src="https://unpkg.com/trinsic-oidc-client-ts@0.1.7-a/dist/browser/oidc-client-ts.js"
      defer="defer"
      id="trinsic-oidc"
    ></script>
    <script>
      const onVerifyClick = async function () {
        var config = {
          authority: "https://connect.trinsic.cloud/",
          client_id: "urn:trinsic:wallets:zACHU5sZ9RrmUZZj9mN88Su",

          popupWindowFeatures:
            "menubar=yes,location=yes,toolbar=yes,width=1200,height=800,left=100,top=100;resizable=yes",
          response_type: "code",
          scope: "openid",

          // trinsic ecosystems
          extraQueryParams: {
            "trinsic:ecosystem": "did-hack",
            "trinsic:schema": ["https://schema.trinsic.cloud/did-hack/example-credential"],
            "trinsic:mode": "popup",
          },
        };

        var mgr = new oidc.UserManager(config);

        var result = await mgr.signinPopup();

        console.log(result.profile._vp_token);
      };

      window.addEventListener("load", function () {
        document.getElementById("verifyButton").addEventListener("click", onVerifyClick);
      });
    </script>
  </body>
</html>
